<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flagging &mdash; SExtractor 2.28.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Measurements" href="Measurements.html" />
    <link rel="prev" title="Weighting" href="Weighting.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            SExtractor
          </a>
              <div class="version">
                2.28.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="License.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installing.html">Installing the software</a></li>
<li class="toctree-l1"><a class="reference internal" href="Using.html">Using SExtractor</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Processing.html">Processing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Background.html">Modeling the background</a></li>
<li class="toctree-l2"><a class="reference internal" href="Weighting.html">Weighting</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Flagging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#extraction-flags-flags">Extraction flags: <span class="param">FLAGS</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="#external-flags-imaflags-iso">External flags: <span class="param">IMAFLAGS_ISO</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Measurements.html">Measurements</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SExtractor</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="Processing.html">Processing</a></li>
      <li class="breadcrumb-item active">Flagging</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Flagging.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="flagging">
<span id="id1"></span><h1>Flagging<a class="headerlink" href="#flagging" title="Permalink to this heading"></a></h1>
<p>Both <em>internal</em> and <em>external</em> flags are available for each detection as catalog parameters:</p>
<ul class="simple">
<li><p>Several sets of internal flags are produced by the various processes within <strong class="program">SExtractor</strong>:</p>
<ul>
<li><p><a class="reference internal" href="#flags-def"><span class="std std-ref">Extraction flags</span></a> (<span class="param">FLAGS</span>)</p></li>
<li><p><a class="reference internal" href="Weighting.html#flags-weight-def"><span class="std std-ref">Weighting flags</span></a> (<span class="param">FLAGS_WEIGHT</span>)</p></li>
<li><p><a class="reference internal" href="PositionWin.html#flags-win-def"><span class="std std-ref">Windowed measurement flags</span></a> (<span class="param">FLAGS_WIN</span>)</p></li>
<li><p><a class="reference internal" href="Model.html#flags-model-def"><span class="std std-ref">Model-fitting flags</span></a> (<span class="param">FLAGS_MODEL</span>);</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#imaflags-iso-def"><span class="std std-ref">External flags</span></a> are derived from <em>flag maps</em>. Flag maps are images in integer format having the same dimensions as the science images, with pixel values that can be used to flag some pixels (for instance, &quot;bad&quot; or noisy pixels). Different combinations of flags can be applied within the isophotal area that defines each object, to produce a unique value that will be written to the catalog.</p></li>
</ul>
<p>Each catalog parameter comprises several flag bits as a sum of powers of 2 coded in decimal. For example, a saturated detection close to an image boundary will have <span class="param">FLAGS</span> = 4+8 = 12 (see below).</p>
<section id="extraction-flags-flags">
<span id="flags-def"></span><h2>Extraction flags: <span class="param">FLAGS</span><a class="headerlink" href="#extraction-flags-flags" title="Permalink to this heading"></a></h2>
<p><span class="param">FLAGS</span> contains 8 flag bits with basic warnings about the source extraction process, in order of increasing concern.</p>
<span id="flags-table"></span><table class="docutils align-default" id="id3">
<caption><span class="caption-number">Table 3 </span><span class="caption-text"><span class="param">FLAGS</span> description</span><a class="headerlink" href="#id3" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 5%" />
<col style="width: 95%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p><a class="reference internal" href="Photom.html#photometry"><span class="std std-ref">aperture photometry</span></a> is likely to be biased by neighboring sources or by more than 10% of bad pixels in any aperture</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>the object has been deblended</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>at least one object pixel is saturated</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>the isophotal footprint of the detected object is truncated (too close to an image boundary)</p></td>
</tr>
<tr class="row-even"><td><p>16</p></td>
<td><p>at least one photometric aperture is incomplete or corrupted (hitting buffer or memory limits)</p></td>
</tr>
<tr class="row-odd"><td><p>32</p></td>
<td><p>the isophotal footprint is incomplete or corrupted (hitting buffer or memory limits)</p></td>
</tr>
<tr class="row-even"><td><p>64</p></td>
<td><p>a memory overflow occurred during deblending</p></td>
</tr>
<tr class="row-odd"><td><p>128</p></td>
<td><p>a memory overflow occurred during extraction</p></td>
</tr>
</tbody>
</table>
</section>
<section id="external-flags-imaflags-iso">
<span id="imaflags-iso-def"></span><h2>External flags: <span class="param">IMAFLAGS_ISO</span><a class="headerlink" href="#external-flags-imaflags-iso" title="Permalink to this heading"></a></h2>
<p>The processing of external flags is triggered whenever <span class="param">IMAFLAGS_ISO</span> or <span class="param">NIMAFLAGS_ISO</span> are present in the catalog parameter file.
The file names of the images containing flag maps in <abbr title="Flexible Image Transport System">FITS</abbr> format are set with the <code class="docutils literal notranslate"><span class="pre">FLAG_IMAGE</span></code> configuration keyword.
Flag maps must be stored as 2-dimensional arrays of 8, 16 or 32 bits integers.
The integers may be signed or unsigned, although for Boolean operations the sign bit will be interpreted as bit 7, 15 or 31, depending on integer size.
Obviously all flag maps must have the same dimensions as the image used for detection.
Flag maps can be created using, e.g., the <a class="reference external" href="http://astromatic.net/software/weightwatcher"><strong class="program">WeightWatcher</strong></a> software <span id="id2">[<a class="reference internal" href="references.html#id36" title="C. Marmo and E. Bertin, 2008. MissFITS and WeightWatcher: Two Optimised Tools for Managing FITS Data. In R. W. Argyle, P. S. Bunclark, and J. R. Lewis, editors, Astronomical Data Analysis Software and Systems XVII, volume 394 of Astronomical Society of the Pacific Conference Series, 619. August 2008.">16</a>]</span>.</p>
<p>The values of flag map pixels that overlap the isophotal area of a given detected object are combined and stored in the catalog as the long integer <span class="param">IMAFLAGS_ISO</span>.
The <code class="docutils literal notranslate"><span class="pre">FLAG_TYPE</span></code> configuration keyword sets the type of combination applied individually to each flag map.
5 types of combination are currently supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OR</span></code>: arithmetic (bit-to-bit) <strong>OR</strong> of flag map pixels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AND</span></code>: arithmetic (bit-to-bit) <strong>AND</strong> of non-zero flag map pixels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MIN</span></code>: minimum of the (signed) flag map pixel values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MAX</span></code>: maximum of the (signed) flag map pixel values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MOST</span></code>: most frequent non-zero flag map pixel value.</p></li>
</ul>
<p>The <span class="param">NIMAFLAGS_ISO</span> catalog parameter contains the number(s) of relevant flag map pixels: the number of non-zero flag map pixels if <code class="docutils literal notranslate"><span class="pre">FLAG_TYPE</span></code> is set to <code class="docutils literal notranslate"><span class="pre">OR</span></code> or <code class="docutils literal notranslate"><span class="pre">AND</span></code>, or the number of pixels with value <span class="param">IMAFLAGS_ISO</span> if <code class="docutils literal notranslate"><span class="pre">FLAG_TYPE</span></code> is set to <code class="docutils literal notranslate"><span class="pre">MIN</span></code> , <code class="docutils literal notranslate"><span class="pre">MAX</span></code>, or <code class="docutils literal notranslate"><span class="pre">MOST</span></code>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Weighting.html" class="btn btn-neutral float-left" title="Weighting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Measurements.html" class="btn btn-neutral float-right" title="Measurements" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2023, CFHT/IAP/CNRS/SorbonneU.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>